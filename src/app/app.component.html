<div class="container">
    <app-app-card [reportes]="reportes"></app-app-card>

    <div class="form mt-3">
        <h3>Agregar Nuevo Reporte</h3>
        <form (ngSubmit)="agregarReporte()" #reporteForm="ngForm">
            <div class="mb-3">
                <label for="titulo" class="form-label">Título</label>
                <input type="text" class="form-control" id="titulo" name="titulo" [(ngModel)]="nuevoReporte.titulo"
                    required maxlength="13">
                <div *ngIf="reporteForm.controls['titulo'].invalid && (reporteForm.controls['titulo'].dirty || reporteForm.controls['titulo'].touched)"
                    class="text-danger">
                    <div *ngIf="reporteForm.controls['titulo'].errors?.['required']">El título es requerido.</div>
                    <div *ngIf="reporteForm.controls['titulo'].errors?.['maxlength']">El título debe tener máximo 13
                        caracteres.</div>
                </div>
            </div>
            <div class="mb-3">
                <label for="descripcion" class="form-label">Descripción</label>
                <textarea class="form-control" id="descripcion" name="descripcion"
                    [(ngModel)]="nuevoReporte.descripcion" required></textarea>
                <div *ngIf="reporteForm.controls['descripcion'].invalid && (reporteForm.controls['descripcion'].dirty || reporteForm.controls['descripcion'].touched)"
                    class="text-danger">
                    <div *ngIf="reporteForm.controls['descripcion'].errors?.['required']">La descripción es requerida.
                    </div>
                </div>
            </div>
            <div class="mb-3">
                <label for="telefono" class="form-label">Teléfono</label>
                <input type="tel" class="form-control" id="telefono" name="telefono" [(ngModel)]="nuevoReporte.telefono"
                    required pattern="^\d+$">
                <div *ngIf="reporteForm.controls['telefono'].invalid && (reporteForm.controls['telefono'].dirty || reporteForm.controls['telefono'].touched)"
                    class="text-danger">
                    <div *ngIf="reporteForm.controls['telefono'].errors?.['required']">El número de teléfono es
                        requerido.</div>
                    <div *ngIf="reporteForm.controls['telefono'].errors?.['pattern']">El número de teléfono debe ser
                        numérico.</div>
                </div>
            </div>
            <div class="mb-3">
                <label for="pais" class="form-label">País</label>
                <select class="form-control" id="pais" name="pais" [(ngModel)]="nuevoReporte.pais" required>
                    <option value="Paraguay">Paraguay</option>
                </select>
                <div *ngIf="reporteForm.controls['pais'].invalid && (reporteForm.controls['pais'].dirty || reporteForm.controls['pais'].touched)"
                    class="text-danger">
                    <div *ngIf="reporteForm.controls['pais'].errors?.['required']">El país es requerido.</div>
                </div>
            </div>
            <div class="mb-3">
                <label for="linkCompleto" class="form-label">Link Completo</label>
                <input type="text" class="form-control" id="linkCompleto" name="linkCompleto"
                    [(ngModel)]="nuevoReporte.linkCompleto" required pattern="^(http(s)?:\/\/).+(\.[\w\d]+)+$">
                <div *ngIf="reporteForm.controls['linkCompleto'].invalid && (reporteForm.controls['linkCompleto'].dirty || reporteForm.controls['linkCompleto'].touched)"
                    class="text-danger">
                    <div *ngIf="reporteForm.controls['linkCompleto'].errors?.['required']">El link es requerido.</div>
                    <div *ngIf="reporteForm.controls['linkCompleto'].errors?.['pattern']">El link debe ser una URL
                        válida.</div>
                </div>
            </div>
            <div class="mb-3">
                <label for="fechaUltimaVezVisto" class="form-label">Fecha Última Vez Visto</label>
                <input type="date" class="form-control" id="fechaUltimaVezVisto" name="fechaUltimaVezVisto"
                    [(ngModel)]="nuevoReporte.fechaUltimaVezVisto" required>
                <div *ngIf="reporteForm.controls['fechaUltimaVezVisto'].invalid && (reporteForm.controls['fechaUltimaVezVisto'].dirty || reporteForm.controls['fechaUltimaVezVisto'].touched)"
                    class="text-danger">
                    <div *ngIf="reporteForm.controls['fechaUltimaVezVisto'].errors?.['required']">La fecha es requerida.
                    </div>
                </div>
            </div>
            <div class="mb-3">
                <label for="imagen" class="form-label">Imagen (URL)</label>
                <input type="text" class="form-control" id="imagen" name="imagen" [(ngModel)]="nuevoReporte.img"
                    required pattern="^(http(s)?:\/\/).+(\.[\w\d]+)+$">
                <div *ngIf="reporteForm.controls['imagen'].invalid && (reporteForm.controls['imagen'].dirty || reporteForm.controls['imagen'].touched)"
                    class="text-danger">
                    <div *ngIf="reporteForm.controls['imagen'].errors?.['required']">La URL de la imagen es requerida.
                    </div>
                    <div *ngIf="reporteForm.controls['imagen'].errors?.['pattern']">La URL de la imagen debe ser válida.
                    </div>
                </div>
            </div>
            <button type="submit" class="btn btn-primary mb-3" [disabled]="reporteForm.invalid">Agregar Reporte</button>
        </form>
    </div>
</div>